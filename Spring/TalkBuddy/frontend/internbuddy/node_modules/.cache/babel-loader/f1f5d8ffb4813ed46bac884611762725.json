{"ast":null,"code":"var _jsxFileName = \"/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Models/Intern.js\";\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport { Button } from '../Layout/BaseLayout.js';\nconst largeColumn = {\n  width: '40%'\n};\nconst midColumn = {\n  width: '30%'\n};\nconst smallColumn = {\n  width: '10%'\n};\n\nclass Intern extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: props.id,\n      name: props.name,\n      rating: props.rating,\n      assignments: props.assignments,\n      isExpanded: false,\n      isAssignView: false,\n      selections: null\n    };\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onRemoveTask = this.onRemoveTask.bind(this);\n    this.setAssignView = this.setAssignView.bind(this);\n    this.onSelectTask = this.onSelectTask.bind(this);\n    this.postAssignments = this.postAssignments.bind(this);\n    this.timer = setInterval(this.updateTasks, 5000);\n    console.log(this.state.assignments);\n  }\n\n  async updateTasks() {\n    const response = await fetch('/api/tasks/');\n    const body = await response.json();\n    const lis = [];\n    body.forEach(task => lis.push({\n      value: task.id,\n      label: task.taskName\n    }));\n    this.setState({\n      allTasks: lis\n    });\n  }\n\n  async componentDidMount() {\n    const response = await fetch('/api/tasks/');\n    const body = await response.json();\n    const lis = [];\n    body.forEach(task => lis.push({\n      value: task.id,\n      label: task.taskName\n    }));\n    this.setState({\n      allTasks: lis\n    });\n  }\n\n  onExpand(event) {\n    this.setState({\n      isExpanded: true\n    });\n  }\n\n  onCollapse(event) {\n    this.setState({\n      isExpanded: false\n    });\n  }\n\n  onSelectTask(choices) {\n    if (choices) this.setState({\n      selections: choices.map(choice => choice.value)\n    });else this.setState({\n      selections: []\n    });\n    console.log(this.state.selections);\n  }\n\n  setAssignView() {\n    this.setState({\n      isAssignView: true,\n      selections: null\n    });\n    console.log(this.state.selections);\n  }\n\n  onRemoveTask(event, internId, assignmentId) {\n    fetch('/api/interns/' + internId + \"/remove_task\" + '?taskIds=' + assignmentId, {\n      method: 'DELETE'\n    });\n\n    const assignmentFilter = assignment => assignment.id !== assignmentId;\n\n    const newAssignments = this.state.assignments.filter(assignmentFilter);\n    this.setState({\n      assignments: newAssignments\n    });\n  }\n\n  async postAssignments(event, internId) {\n    if (this.state.selections) {\n      const response = await fetch('/api/interns/' + internId + \"/assign_task\" + '?taskIds=' + this.state.selections.join(), {\n        method: 'POST'\n      });\n      const body = await response.json();\n      this.setState({\n        isAssignView: false,\n        assignments: body.assignments\n      });\n    }\n\n    this.setState({\n      isAssignView: false\n    });\n  }\n\n  render() {\n    if (this.state.isExpanded) {\n      return React.createElement(\"div\", {\n        key: this.state.id,\n        className: \"table-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: midColumn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: this.state.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.state.name)), React.createElement(\"span\", {\n        style: midColumn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, this.state.rating), React.createElement(\"span\", {\n        style: largeColumn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button-inline\",\n        onClick: this.onCollapse,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Collapse\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(\"ol\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.state.assignments.map(assignment => React.createElement(\"li\", {\n        key: assignment.task.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, assignment.task.taskName), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), assignment.task.description, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"button-inline\",\n        onClick: event => this.onRemoveTask(event, this.state.id, assignment.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Remove Task\"))))), React.createElement(\"span\", {\n        style: smallColumn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button-inline\",\n        onClick: () => this.props.onDelete(this.state.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Delete\")));\n    }\n\n    if (this.state.isAssignView) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Select, {\n        isMulti: true,\n        options: this.state.allTasks,\n        onChange: this.onSelectTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"button-inline\",\n        onClick: event => this.postAssignments(event, this.state.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \" Post Assignments \"));\n    }\n\n    return React.createElement(\"div\", {\n      key: this.state.id,\n      className: \"table-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: midColumn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.state.name), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: midColumn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.state.rating), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: smallColumn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"button-inline\",\n      onClick: this.onExpand,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Expand\")), React.createElement(\"span\", {\n      style: smallColumn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"button-inline\",\n      onClick: this.setAssignView,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Assign Task\")), React.createElement(\"span\", {\n      style: smallColumn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"button-inline\",\n      onClick: () => this.props.onDelete(this.state.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Delete\")));\n  }\n\n}\n\nexport default Intern;","map":{"version":3,"sources":["/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Models/Intern.js"],"names":["React","Component","Select","Button","largeColumn","width","midColumn","smallColumn","Intern","constructor","props","state","id","name","rating","assignments","isExpanded","isAssignView","selections","onExpand","bind","onCollapse","onRemoveTask","setAssignView","onSelectTask","postAssignments","timer","setInterval","updateTasks","console","log","response","fetch","body","json","lis","forEach","task","push","value","label","taskName","setState","allTasks","componentDidMount","event","choices","map","choice","internId","assignmentId","method","assignmentFilter","assignment","newAssignments","filter","join","render","description","onDelete"],"mappings":"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","sourcesContent":["\nimport React,{Component} from 'react';\nimport Select from 'react-select';\nimport {Button} from'../Layout/BaseLayout.js'\n\nconst largeColumn = {width:'40%',};\nconst midColumn = {width:'30%',};\nconst smallColumn = {width:'10%'};\n\n\nclass Intern extends React.Component\n{\n\n\n\n\n\n\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            id:props.id,\n            name:props.name,\n            rating:props.rating,\n            assignments:props.assignments,\n            isExpanded:false,\n            isAssignView:false,\n            selections:null\n        };\n        this.onExpand=this.onExpand.bind(this);\n        this.onCollapse=this.onCollapse.bind(this);\n        this.onRemoveTask=this.onRemoveTask.bind(this);\n        this.setAssignView=this.setAssignView.bind(this);\n        this.onSelectTask=this.onSelectTask.bind(this);\n        this.postAssignments=this.postAssignments.bind(this);\n        this.timer = setInterval(this.updateTasks,5000)\n        console.log(this.state.assignments);\n    }\n\n\n    async updateTasks()\n    {\n        const response = await fetch('/api/tasks/');\n        const body = await response.json();\n        const lis = []\n        body.forEach(task=>lis.push({value:task.id,label:task.taskName}))\n        this.setState({allTasks:lis});\n    }\n\n\n    async componentDidMount()\n    {\n      const response = await fetch('/api/tasks/');\n      const body = await response.json();\n      const lis = []\n      body.forEach(task=>lis.push({value:task.id,label:task.taskName}))\n      this.setState({allTasks:lis});\n    }\n\n    onExpand(event)\n    {\n\n        this.setState({isExpanded:true});\n    }\n\n    onCollapse(event)\n    {\n        this.setState({isExpanded:false});\n    }\n\n   onSelectTask(choices)\n   {\n        if(choices)\n            this.setState({selections:choices.map(choice=>choice.value)});\n        else\n            this.setState({selections:[]});\n        console.log(this.state.selections);\n   }\n\n   setAssignView()\n   {\n    this.setState({isAssignView:true,selections:null});\n    console.log(this.state.selections)\n   }\n\n\n   onRemoveTask(event,internId,assignmentId)\n    {\n\n        fetch('/api/interns/'+internId+\"/remove_task\"+'?taskIds='+assignmentId,{method:'DELETE'});\n        const assignmentFilter = assignment=>assignment.id!==assignmentId;\n        const newAssignments = this.state.assignments.filter(assignmentFilter);\n        this.setState({assignments:newAssignments});\n    }\n\n\n    async postAssignments(event,internId)\n    {\n        if(this.state.selections){\n             const response = await fetch('/api/interns/'+internId+\"/assign_task\"+'?taskIds='+this.state.selections.join(),{method:'POST'});\n             const body = await response.json();\n             this.setState({isAssignView:false,assignments:body.assignments});\n        }\n        this.setState({isAssignView:false});\n    }\n\n    render()\n    {\n        if(this.state.isExpanded)\n        {\n\n            return(\n                <div key={this.state.id} className=\"table-row\">\n                          <span style={midColumn}>\n                              <a href={this.state.name}>{this.state.name}</a>\n                          </span>\n                          <span style={midColumn}>{this.state.rating}</span>\n                          <span style={largeColumn}>\n                          <Button className=\"button-inline\" onClick={this.onCollapse}>\n                               Collapse\n                           </Button><br />\n                           <ol>\n                           {\n                            this.state.assignments.map(\n                                assignment=>\n                                <li key={assignment.task.id}>\n                                    <b>{assignment.task.taskName}</b>\n                                    <br/>\n                                    {assignment.task.description}\n                                    <br/>\n                                    <Button className=\"button-inline\" onClick={(event)=>this.onRemoveTask(event,this.state.id,assignment.id)}>Remove Task</Button>\n                               </li>\n                            )\n                           }\n                           </ol>\n                           </span>\n                           <span style={smallColumn}>\n                           <Button className=\"button-inline\" onClick={()=>this.props.onDelete(this.state.id)}>\n                               Delete\n                           </Button>\n                           </span>\n                 </div>\n\n            );\n        }\n\n        if(this.state.isAssignView)\n        {\n            return(\n                <div>\n                    <Select\n                        isMulti\n                        options={this.state.allTasks}\n                        onChange={this.onSelectTask}\n                    />\n                    <br />\n                    <Button className=\"button-inline\" onClick={(event)=>this.postAssignments(event,this.state.id)}> Post Assignments </Button>\n                </div>\n            )\n        }\n\n        return(\n                <div key={this.state.id} className=\"table-row\">\n                          <span style={midColumn}>\n                             {this.state.name}\n                          </span><br/>\n                          <span style={midColumn}>{this.state.rating}</span><br />\n                          <span style={smallColumn}>\n                          <Button className=\"button-inline\" onClick={this.onExpand}>\n                               Expand\n                           </Button>\n                           </span>\n                           <span style={smallColumn}>\n                                <Button className=\"button-inline\" onClick={this.setAssignView}>\n                                    Assign Task\n                                </Button>\n                           </span>\n                           <span style={smallColumn}>\n                           <Button className=\"button-inline\" onClick={()=>this.props.onDelete(this.state.id)}>\n                               Delete\n                           </Button>\n                           </span>\n                </div>\n\n            );\n        }\n}\n\n\n\n\nexport default Intern;"]},"metadata":{},"sourceType":"module"}