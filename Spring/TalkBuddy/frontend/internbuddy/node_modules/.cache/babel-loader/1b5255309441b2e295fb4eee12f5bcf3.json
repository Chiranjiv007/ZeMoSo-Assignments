{"ast":null,"code":"var _jsxFileName = \"/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Main.js\";\nimport React, { Component } from 'react';\nimport MentorApp from './MentorApp';\nimport AdminApp from './AdminApp';\nimport { auth, startFirebaseUI } from './Login/firebase.js';\nimport { Snackbar } from '@material-ui/core';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      role: null\n    };\n    this.handleLogin = this.handleLogin.bind(this);\n    auth.onAuthStateChanged(user => this.handleLogin(user));\n  }\n\n  async handleLogin(user) {\n    this.setState({\n      user: user\n    });\n    if (user == null) startFirebaseUI(\"#firebaseui-auth-container\");else {\n      const user_role = await fetch('/api/roles/rolelevel', {\n        headers: {\n          'uid': user.uid\n        }\n      });\n      const newLevel = await user_role.text();\n\n      if (newLevel === 'UNRECOGNIZED_USER' && user != null) {\n        auth.signOut();\n        return React.createElement(Snackbar, {\n          anchorOrigin: {\n            vertical: 'bottom',\n            horizontal: 'left'\n          },\n          autoHideDuration: 6000,\n          s: true,\n          ContentProps: {\n            'aria-describedby': 'message-id'\n          },\n          message: React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, \"Note archived\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        });\n      } else this.setState({\n        role: newLevel.slice(1, -1)\n      });\n    }\n  }\n\n  render() {\n    if (this.state.user !== null && this.state.role != null) {\n      if (this.state.role == 'ADMIN') return React.createElement(MentorApp, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      });\n      if (this.state.role == 'ADMIN') return React.createElement(AdminApp, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      });else return React.createElement(MentorApp, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n    } else return React.createElement(\"div\", {\n      id: \"firebaseui-auth-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Main.js"],"names":["React","Component","MentorApp","AdminApp","auth","startFirebaseUI","Snackbar","Main","constructor","props","state","user","role","handleLogin","bind","onAuthStateChanged","setState","user_role","fetch","headers","uid","newLevel","text","signOut","vertical","horizontal","slice","render"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,IAAT,EAAeC,eAAf,QAAuC,qBAAvC;AACA,SAASC,QAAT,QAAyB,mBAAzB;;AACA,MAAMC,IAAN,SAAmBP,KAAK,CAACC,SAAzB,CACA;AAKIO,EAAAA,WAAW,CAACC,KAAD,EACX;AACI,UAAMA,KAAN;AADJ,SALAC,KAKA,GALM;AACFC,MAAAA,IAAI,EAAC,IADH;AAEFC,MAAAA,IAAI,EAAC;AAFH,KAKN;AAEI,SAAKC,WAAL,GAAiB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAjB;AACAV,IAAAA,IAAI,CAACW,kBAAL,CAAyBJ,IAAD,IAAQ,KAAKE,WAAL,CAAiBF,IAAjB,CAAhC;AACH;;AAED,QAAME,WAAN,CAAkBF,IAAlB,EACA;AACI,SAAKK,QAAL,CAAc;AAACL,MAAAA,IAAI,EAACA;AAAN,KAAd;AACA,QAAGA,IAAI,IAAE,IAAT,EACIN,eAAe,CAAC,4BAAD,CAAf,CADJ,KAGA;AACG,YAAMY,SAAS,GAAG,MAAMC,KAAK,CAAC,sBAAD,EAAwB;AAACC,QAAAA,OAAO,EAAE;AAAC,iBAAMR,IAAI,CAACS;AAAZ;AAAV,OAAxB,CAA7B;AACA,YAAMC,QAAQ,GAAG,MAAMJ,SAAS,CAACK,IAAV,EAAvB;;AACA,UAAGD,QAAQ,KAAG,mBAAX,IAAkCV,IAAI,IAAE,IAA3C,EACA;AACIP,QAAAA,IAAI,CAACmB,OAAL;AACA,eAAO,oBAAC,QAAD;AACN,UAAA,YAAY,EAAE;AACZC,YAAAA,QAAQ,EAAE,QADE;AAEZC,YAAAA,UAAU,EAAE;AAFA,WADR;AAKN,UAAA,gBAAgB,EAAE,IALZ;AAKiB,UAAA,CAAC,MALlB;AAMN,UAAA,YAAY,EAAE;AACZ,gCAAoB;AADR,WANR;AASN,UAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAUH,OAbD,MAeC,KAAKT,QAAL,CAAc;AAACJ,QAAAA,IAAI,EAACS,QAAQ,CAACK,KAAT,CAAe,CAAf,EAAiB,CAAC,CAAlB;AAAN,OAAd;AACH;AACJ;;AAEDC,EAAAA,MAAM,GACN;AACI,QAAG,KAAKjB,KAAL,CAAWC,IAAX,KAAkB,IAAlB,IAA0B,KAAKD,KAAL,CAAWE,IAAX,IAAiB,IAA9C,EACA;AACQ,UAAG,KAAKF,KAAL,CAAWE,IAAX,IAAiB,OAApB,EACI,OAAO,oBAAC,SAAD;AAAW,QAAA,IAAI,EAAE,KAAKF,KAAL,CAAWC,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACJ,UAAG,KAAKD,KAAL,CAAWE,IAAX,IAAiB,OAApB,EACI,OAAO,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAE,KAAKF,KAAL,CAAWC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP,CADJ,KAGI,OAAO,oBAAC,SAAD;AAAW,QAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACX,KARD,MAUI,OAAO;AAAK,MAAA,EAAE,EAAC,2BAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACP;;AArDL;;AAwDA,eAAeJ,IAAf","sourcesContent":["import React,{Component} from 'react';\nimport MentorApp from './MentorApp'\nimport AdminApp from './AdminApp'\nimport { auth, startFirebaseUI  } from './Login/firebase.js'\nimport { Snackbar } from '@material-ui/core';\nclass Main extends React.Component\n{\n    state={\n        user:null,\n        role:null\n        };\n    constructor(props)\n    {\n        super(props);\n        this.handleLogin=this.handleLogin.bind(this);\n        auth.onAuthStateChanged((user)=>this.handleLogin(user));\n    }\n\n    async handleLogin(user)\n    {\n        this.setState({user:user});\n        if(user==null)\n            startFirebaseUI(\"#firebaseui-auth-container\");\n        else\n        {\n           const user_role = await fetch('/api/roles/rolelevel',{headers: {'uid':user.uid}});\n           const newLevel = await user_role.text()\n           if(newLevel==='UNRECOGNIZED_USER' && user!=null)\n           {\n               auth.signOut();\n               return(<Snackbar\n                anchorOrigin={{\n                  vertical: 'bottom',\n                  horizontal: 'left',\n                }}\n                autoHideDuration={6000}s\n                ContentProps={{\n                  'aria-describedby': 'message-id',\n                }}\n                message={<span>Note archived</span>} />);\n           }\n           else\n            this.setState({role:newLevel.slice(1,-1)})\n        }\n    }\n\n    render()\n    {\n        if(this.state.user!==null && this.state.role!=null)\n        {\n                if(this.state.role=='ADMIN')\n                    return <MentorApp user={this.state.user}/>;\n                if(this.state.role=='ADMIN')\n                    return <AdminApp user={this.state.user}/>\n                else\n                    return <MentorApp user={this.state.user} />\n        }\n        else\n            return <div id=\"firebaseui-auth-container\"></div>;\n    }\n}\n\nexport default Main"]},"metadata":{},"sourceType":"module"}