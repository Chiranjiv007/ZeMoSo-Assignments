{"ast":null,"code":"var _jsxFileName = \"/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Main.js\";\nimport React, { Component } from 'react';\nimport MentorApp from './MentorApp';\nimport AdminApp from './AdminApp';\nimport InternApp from './InternApp';\nimport { auth, startFirebaseUI } from './Login/firebase.js';\nimport { Snackbar, TextField, Box } from '@material-ui/core';\nimport BasicForm from './BasicFormMaker';\nimport { Provider } from 'react-redux';\nimport Store from './Store';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      role: null,\n      open: false\n    };\n    this.classes = {\n      root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        flexDirection: 'column',\n        alignItems: 'center'\n      }\n    };\n    this.handleLogin = this.handleLogin.bind(this);\n    auth.onAuthStateChanged(user => this.handleLogin(user));\n  }\n\n  async handleLogin(user) {\n    this.setState({\n      user: user\n    });\n    if (user == null) startFirebaseUI(\"#firebaseui-auth-container\");else {\n      const user_role = await fetch('/api/roles/rolelevel', {\n        headers: {\n          'uid': user.uid\n        }\n      });\n      const profile = await user_role.json();\n\n      if (profile.role === 'UNRECOGNIZED_USER' && user != null) {\n        const response = await fetch('/api/interns/createintern/' + user.uid, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            name: user.email,\n            rating: 0\n          })\n        });\n        const intern = await response.json();\n        this.setState({\n          role: intern\n        });\n      } else {\n        if (profile.role == 'INTERN') this.setState({\n          role: profile.intern\n        });else if (profile.role == \"MENTOR\") this.setState({\n          role: profile.mentor\n        });else this.setState({\n          role: \"ADMIN\"\n        });\n      }\n    }\n  }\n\n  render() {\n    if (this.state.user !== null && this.state.role != null) {\n      if (this.state.role == 'ADMIN') return React.createElement(MentorApp, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      });\n      if (this.state.role == 'ADMIN') return React.createElement(AdminApp, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      });else return React.createElement(Provider, {\n        store: Store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(InternApp, {\n        user: this.state.user,\n        intern: this.state.role,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }));\n    } else return React.createElement(\"div\", {\n      id: \"firebaseui-auth-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/user/Assignments-Zemoso/Spring/TalkBuddy/frontend/internbuddy/src/Main.js"],"names":["React","Component","MentorApp","AdminApp","InternApp","auth","startFirebaseUI","Snackbar","TextField","Box","BasicForm","Provider","Store","Main","constructor","props","state","user","role","open","classes","root","display","flexWrap","flexDirection","alignItems","handleLogin","bind","onAuthStateChanged","setState","user_role","fetch","headers","uid","profile","json","response","method","body","JSON","stringify","name","email","rating","intern","mentor","render"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport MentorApp from './MentorApp'\nimport AdminApp from './AdminApp'\nimport InternApp from './InternApp'\nimport { auth, startFirebaseUI  } from './Login/firebase.js'\nimport { Snackbar,TextField,Box } from '@material-ui/core';\nimport BasicForm from './BasicFormMaker'\nimport {Provider} from 'react-redux'\nimport Store from './Store'\nclass Main extends React.Component\n{\n    state={\n        user:null,\n        role:null,\n        open:false\n        };\n    classes={\n            root:\n            {\n                display:'flex',\n                flexWrap:'wrap',\n                flexDirection:'column',\n                alignItems:'center',\n            }\n    }\n    constructor(props)\n    {\n        super(props);\n        this.handleLogin=this.handleLogin.bind(this);\n        auth.onAuthStateChanged((user)=>this.handleLogin(user));\n        \n    }\n\n    async handleLogin(user)\n    {\n        this.setState({user:user});\n        if(user==null)\n            startFirebaseUI(\"#firebaseui-auth-container\");\n        else\n        {\n           const user_role = await fetch('/api/roles/rolelevel',{headers: {'uid':user.uid}});\n           const profile = await user_role.json()\n           if(profile.role==='UNRECOGNIZED_USER' && user!=null)\n           {\n              \n               const response = await fetch('/api/interns/createintern/'+user.uid, {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                },\n                body:JSON.stringify({\n                    name:user.email,\n                    rating:0\n                })\n              });\n              const intern = await response.json();\n               this.setState({role:intern});\n           }\n           else\n           {\n            if(profile.role=='INTERN')\n                this.setState({role:profile.intern})\n            else if(profile.role==\"MENTOR\")\n                this.setState({role:profile.mentor})\n            else\n                this.setState({role:\"ADMIN\"})\n           }\n        }\n    }\n\n    render()\n    {\n        if(this.state.user!==null && this.state.role!=null)\n        {\n                if(this.state.role=='ADMIN')\n                    return <MentorApp user={this.state.user}/>;\n                if(this.state.role=='ADMIN')\n                    return <AdminApp user={this.state.user}/>\n                else\n                    return <Provider store={Store}><InternApp user={this.state.user} intern={this.state.role} /></Provider>\n        }\n        else\n            return(\n                <div id=\"firebaseui-auth-container\"></div>\n            );\n    }\n}\n\nexport default Main"]},"metadata":{},"sourceType":"module"}